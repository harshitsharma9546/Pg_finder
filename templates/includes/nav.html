{% load static %}
<nav class="navbar">
  <a class="logo" href="{% url 'home' %}">
    <div class="logo">E-Hostel<span>& PG</span></div>
  </a>
  <ul class="nav-links">
    {% if user.is_authenticated %}
      <li><a href="{% url 'home'%}">Home</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Contact</a></li>
      <li><a href="#">Visit</a></li>
      
      <!-- User Profile Section -->
      <li class="user-profile">
        <div class="profile-container" id="profileToggle">
          {% if user.profile.profile_image %}
            <img src="{{ user.profile.profile_image.url }}" alt="Profile" class="profile-img">
          {% else %}
            <img src="{% static 'images/user.png' %}" alt="Profile" class="profile-img">
          {% endif %}
          {% comment %} <span class="user-name">{{ user.first_name|default:user.username }}</span> {% endcomment %}
        </div>
        
        <!-- Sidebar Dropdown -->
        <div class="profile-sidebar" id="profileSidebar">
          <div class="sidebar-header">
            {% if user.profile.profile_image %}
              <img src="{{ user.profile.profile_image.url }}" alt="Profile" class="sidebar-profile-img">
            {% else %}
              <img src="{% static 'images/user.png' %}" alt="Profile" class="sidebar-profile-img">
            {% endif %}
            <div>
              <p class="sidebar-name">{{ user.first_name|default:user.username }}</p>
              <p class="sidebar-email">{{ user.email }}</p>
            </div>
          </div>
          
          <hr>
          
          <ul class="sidebar-menu">
            <li><a href="#">My Profile</a></li>
            <li><a href="#">My Bookings</a></li>
            <li><a href="#">Settings</a></li>
            <li><a href="#">Help & Support</a></li>
          </ul>
          
          <hr>
          
          <div class="sidebar-logout">
            <a href="{% url 'user_logout' %}" class="logout-btn">Logout</a>
          </div>
        </div>
      </li>
    {% else %}
      <li><a href="{%url 'user_login'%}">Login</a></li>
      <li><a href="{%url 'signup'%}">Signup</a></li>
    {% endif %}
  </ul>
</nav>

<!-- JavaScript for Sidebar Toggle -->

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const profileToggle = document.getElementById('profileToggle');
    const profileSidebar = document.getElementById('profileSidebar');
    
    if (profileToggle && profileSidebar) {
      profileToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        profileSidebar.classList.toggle('active');
      });
      
      // Close sidebar when clicking inside it
      profileSidebar.addEventListener('click', function(e) {
        e.stopPropagation();
      });
      
      // Close sidebar when clicking outside
      document.addEventListener('click', function(e) {
        if (!profileToggle.contains(e.target) && !profileSidebar.contains(e.target)) {
          profileSidebar.classList.remove('active');
        }
      });
    }
  });
</script>